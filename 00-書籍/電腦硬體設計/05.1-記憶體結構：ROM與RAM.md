
記憶體模組在數位系統中扮演著關鍵角色，負責存儲資料並提供讀取與寫入操作。在本章中，我們將介紹兩種最基本的記憶體結構：**唯讀記憶體 (ROM)** 和 **隨機存取記憶體 (RAM)**。這兩種記憶體各有其特性和應用場景，並且可以透過 Verilog 實作這些記憶體結構。

##### 1. **唯讀記憶體 (ROM)**

唯讀記憶體（ROM）是一種只能讀取、無法寫入的記憶體，常用於存儲固定資料，如指令集或初始化資料。ROM 是靜態的，意味著在設計階段就已經定義好其內容，並且在系統運行期間不會更改。ROM 的主要特點是無需時鐘信號即可提供資料，因此常用於載入固定指令或配置資料。

###### 1.1 **ROM 設計與實作**

在 Verilog 中，我們可以設計一個 ROM 模組來存儲固定的資料。以下是一個簡單的 8 位寬，16 地址位元組的 ROM 設計範例：

```verilog
module rom (
    input [3:0] addr,   // 地址信號 (4 位地址)
    output reg [7:0] dout // 讀取資料 (8 位資料)
);

    // 初始化 ROM 內容
    always @(addr) begin
        case (addr)
            4'b0000: dout = 8'b00000001;
            4'b0001: dout = 8'b00000010;
            4'b0010: dout = 8'b00000011;
            4'b0011: dout = 8'b00000100;
            4'b0100: dout = 8'b00000101;
            4'b0101: dout = 8'b00000110;
            4'b0110: dout = 8'b00000111;
            4'b0111: dout = 8'b00001000;
            // 可以繼續定義更多地址映射
            default: dout = 8'b00000000; // 預設值
        endcase
    end
endmodule
```

在這個範例中，`addr` 是 4 位的地址信號，`dout` 是 8 位寬的資料輸出。`case` 語句根據地址來選擇對應的資料。ROM 的內容在設計時就已經寫死，並且無法在運行中更改。

###### 1.2 **ROM 的應用場景**

ROM 常用於以下情況：
- 存儲固定的程式碼或指令集。
- 存儲啟動程序或配置資料，特別是在嵌入式系統中。
- 存儲靜態資料，例如遊戲中的固定場景或音效。

##### 2. **隨機存取記憶體 (RAM)**

隨機存取記憶體（RAM）是一種可以讀寫的記憶體，與 ROM 不同，RAM 允許在任何時間隨機地讀取或寫入資料。RAM 的內容在每次開機時會丟失，並且通常用來存儲正在執行的程式和數據。根據存儲技術的不同，RAM 可以分為 **靜態 RAM (SRAM)** 和 **動態 RAM (DRAM)**，在硬體設計中，我們通常會使用同步 RAM。

###### 2.1 **同步 RAM 設計**

同步 RAM 是指資料的讀取與寫入操作是由時鐘信號同步控制的。以下是一個簡單的 8 位寬，16 位地址的同步 RAM 實作：

```verilog
module sync_ram (
    input clk,                  // 時鐘信號
    input we,                   // 寫使能信號
    input [3:0] addr,           // 地址信號
    input [7:0] din,            // 寫入資料
    output reg [7:0] dout       // 讀取資料
);

    reg [7:0] memory [15:0];    // 16 個地址，每個地址 8 位資料

    always @(posedge clk) begin
        if (we)                 // 如果寫使能信號為高，執行寫入
            memory[addr] <= din;
        dout <= memory[addr];    // 讀取對應地址的資料
    end
endmodule
```

在這個範例中，`clk` 是時鐘信號，`we` 是寫使能信號，`addr` 是地址信號，`din` 是寫入資料，`dout` 是讀取資料。`memory` 是一個大小為 16 的記憶體陣列，每個元素為 8 位。如果寫使能信號 `we` 為高，資料就會寫入對應地址，否則會從該地址讀取資料。

###### 2.2 **同步 RAM 的應用場景**

同步 RAM 用於需要快速讀寫操作的場合，常見的應用包括：
- 主要記憶體，用於存儲正在運行的程式碼或數據。
- 緩衝區或緩存系統，存儲即將處理或已處理的資料。
- 圖形處理單元 (GPU) 中的快取記憶體。

##### 3. **比較 ROM 與 RAM**

| 特性         | ROM                          | RAM                          |
|--------------|------------------------------|------------------------------|
| 讀寫方式     | 只讀                          | 讀寫                          |
| 時間特性     | 不需要時鐘信號                | 需要時鐘信號同步操作         |
| 資料保留     | 資料在開機後保持不變          | 資料在斷電後丟失             |
| 應用         | 固定資料存儲（程式碼、資料） | 執行中的程式碼與資料存儲     |
| 存儲速度     | 較慢                          | 較快                          |

##### 小結

本章介紹了 **唯讀記憶體 (ROM)** 和 **隨機存取記憶體 (RAM)** 的設計原理和 Verilog 實現方式。ROM 主要用於存儲固定資料，而 RAM 用於動態讀寫資料。掌握這些基本記憶體結構的設計方法，能夠為更複雜的系統設計奠定基礎，並提升整體設計效率。在實際的硬體設計中，這些記憶體結構可以根據具體需求進行擴展與優化。