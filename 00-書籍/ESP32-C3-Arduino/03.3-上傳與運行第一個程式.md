#### 3.3 上傳與運行第一個程式

在學習 ESP32-C3 開發時，最基本的一步就是編寫並上傳您的第一個程序。這不僅是測試開發環境設置是否正確，也是了解如何將程式燒錄到 ESP32-C3 開發板的關鍵步驟。在這一部分，我們將引導您從編寫程式到成功上傳和運行的整個過程。

---

### **1. 編寫第一個程式**

第一個程式通常是 "Hello, World!" 類型的程式，即讓開發板做一些簡單的操作，例如控制 LED 閃爍。在這裡，我們將編寫一個簡單的 LED 燈閃爍程式。

#### **1.1 在 Arduino IDE 中編寫程式**

1. **打開 Arduino IDE**：
   - 啟動 Arduino IDE 並確保已經選擇了 ESP32-C3 開發板。

2. **編寫燈閃程式**：
   - 在 Arduino IDE 中，打開一個新的草稿，然後輸入以下程式碼：

   ```cpp
   // 設定 LED 引腳 (GPIO2 是 ESP32-C3 開發板上的內建 LED)
   const int ledPin = 2;

   void setup() {
     // 設定 LED 引腳為輸出
     pinMode(ledPin, OUTPUT);
   }

   void loop() {
     // 點亮 LED
     digitalWrite(ledPin, HIGH);
     delay(1000);  // 延遲 1 秒

     // 熄滅 LED
     digitalWrite(ledPin, LOW);
     delay(1000);  // 延遲 1 秒
   }
   ```

   - **程式解釋**：
     - `pinMode(ledPin, OUTPUT)`：設定 GPIO2 為輸出模式，這是 ESP32-C3 上的內建 LED。
     - `digitalWrite(ledPin, HIGH)`：打開 LED。
     - `delay(1000)`：延遲 1 秒（1000 毫秒）。
     - `digitalWrite(ledPin, LOW)`：關閉 LED。

3. **保存程式**：
   - 將該程式保存為 `blink.ino`，便於未來管理。

---

### **2. 配置開發環境**

#### **2.1 選擇 ESP32-C3 開發板**

1. 在 Arduino IDE 中，選擇 **工具 (Tools)** 菜單。
2. 在 **開發板 (Board)** 下拉菜單中選擇您的 ESP32-C3 開發板。例如，選擇 **ESP32C3 DevKit** 或您的具體型號。
   
   - 如果您尚未安裝 ESP32 的開發板支持，請前往 **工具 (Tools) > 開發板 (Boards Manager)**，搜尋並安裝 **esp32**。

#### **2.2 選擇正確的端口**

1. 在 **工具 (Tools) > 端口 (Port)** 菜單中，選擇與您的 ESP32-C3 開發板相對應的串口端口。如果您不確定端口是哪一個，可以先拔掉開發板再插回來，查看哪個端口顯示變化。

---

### **3. 上傳程式到 ESP32-C3**

#### **3.1 準備上傳**

1. **選擇正確的開發板和端口**：
   - 確保您已經選擇了正確的開發板和端口。

2. **按下開發板的復位按鈕 (可選)**：
   - 有些 ESP32-C3 開發板需要按下復位按鈕以啟動燒錄模式。當您開始上傳程式時，這個步驟可能是必需的。

3. **開始上傳**：
   - 點擊 **上傳 (Upload)** 按鈕，程序將開始燒錄到 ESP32-C3 開發板。
   - 上傳過程中，Arduino IDE 會顯示進度條，並且會顯示燒錄過程中的一些信息。

---

### **4. 監控並驗證程序運行**

#### **4.1 打開串口監控器**

1. 在 Arduino IDE 中，點擊 **工具 (Tools) > 串行監控器 (Serial Monitor)**，或使用快捷鍵 **Ctrl + Shift + M**。
2. 設定串口監控器的波特率為 115200（這是 ESP32-C3 默認的波特率）。
3. 您不一定需要串口監控器來驗證燈閃功能，但它有助於您查看開發板的輸出信息。

#### **4.2 查看 LED 的行為**

- 在 ESP32-C3 上傳並運行您的程式後，開發板上的內建 LED 應該會開始每秒閃爍一次。
- 如果 LED 閃爍正常，這就意味著您的程式成功運行。

---

### **5. 常見問題排除**

#### **5.1 上傳過程中出現錯誤**

- **錯誤消息：`Could not open COMx`**：
   - 確保選擇了正確的串口端口，並且 ESP32-C3 已正確連接到電腦。
   - 如果使用 USB 集線器，嘗試直接將開發板連接到電腦的 USB 端口。

- **錯誤消息：`esptool.FatalError: Failed to connect to ESP32: Timed out waiting for packet header`**：
   - 這通常表示開發板未進入燒錄模式。請在上傳過程中按下 ESP32-C3 開發板上的復位按鈕。

#### **5.2 LED 不閃爍**

- 確保您編寫的程式沒有錯誤。檢查 `pinMode` 和 `digitalWrite` 函數的使用，並確認您使用的引腳（通常是 GPIO2）與開發板上的 LED 引腳相符。
- 嘗試重新上電 ESP32-C3 並再次上傳程式。

---

### **6. 結論**

恭喜您完成了第一個 ESP32-C3 程式的上傳與運行！通過這個簡單的燈閃程式，您不僅測試了開發環境是否正確設置，還熟悉了如何上傳程式、使用串口監控器，以及如何進行簡單的調試。這是進一步開發更多功能、創建更複雜應用的基礎。