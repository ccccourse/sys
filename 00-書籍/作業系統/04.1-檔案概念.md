### 4.1 檔案概念

檔案（File）是操作系統中最基本的資料儲存單位，代表著磁碟、磁帶等存儲設備中的資料集合。檔案的概念不僅涵蓋了資料本身，還包括了檔案的組織結構、屬性以及操作這些資料的方法。對於使用者來說，檔案是他們與計算機系統互動的重要橋樑，儲存著各種資料，如文本檔、程式碼、圖像、音頻等。

#### 4.1.1 檔案的基本定義

檔案可以被視為一個有名稱的資料集合，這些資料儲存在某種物理媒介上。這些資料按照一定的結構進行編排，可以是連續的，也可以是分散的。檔案通常有一個唯一的名稱，用於識別它在檔案系統中的位置。此外，檔案還會包含一些元資料（metadata），如檔案的創建時間、最後修改時間、大小、擁有者等。

#### 4.1.2 檔案的屬性

檔案除了包含具體的資料外，還會有一些屬性來描述檔案的特徵，這些屬性通常包括：

- **檔案名稱**：檔案的識別符號，是唯一且不可以重複的名稱，通常由檔案名和副檔名組成（例如 `document.txt`）。在不同作業系統中，檔案名的長度和格式可能會有所不同。
- **檔案類型**：檔案所包含資料的類型，這通常由副檔名來標示。例如，`.txt`表示純文字檔，`.jpg`表示圖像檔。
- **檔案大小**：檔案所佔用的磁碟空間，通常以位元組（bytes）為單位。檔案大小是描述檔案的重要屬性，通常可以幫助用戶估算檔案的存儲需求。
- **創建時間**：檔案被創建或首次寫入的時間。這個時間可以幫助系統或使用者了解檔案的生存週期。
- **修改時間**：檔案最後一次被修改的時間。每當檔案內容被更新時，這個時間就會更新。
- **存取權限**：指定誰可以對檔案進行何種操作（如讀取、寫入、執行）。這是多用戶系統中非常重要的屬性，涉及檔案的安全性和隱私性。
- **檔案擁有者**：檔案的擁有者通常是創建檔案的使用者，擁有者擁有對檔案的特殊權限。

#### 4.1.3 檔案的類型

檔案可以根據其所包含資料的性質或用途進行分類，常見的檔案類型包括：

- **文本檔案（Text Files）**：這些檔案只包含純文字資料，如 `.txt`、`.csv`、`.html` 等檔案格式。文本檔案的內容通常是人類可讀的。
- **二進位檔案（Binary Files）**：這些檔案包含的是二進制資料，無法直接以文字的方式查看。二進位檔案包括程式檔、圖像檔、音訊檔等格式（如 `.exe`、`.png`、`.mp3` 等）。
- **執行檔案（Executable Files）**：這些檔案包含可直接執行的程式碼，當運行時會被操作系統加載到記憶體中並執行。執行檔案的範例包括 `.exe`、`.out` 等。
- **資料庫檔案（Database Files）**：資料庫檔案是專門用於存儲結構化資料的檔案，例如 `.db`、`.sql`、`.mdb` 等。
- **特殊檔案（Special Files）**：這些檔案代表的是設備或系統資源，如 `/dev` 中的設備檔案或 `/proc` 中的系統資訊檔案。

#### 4.1.4 檔案的操作

檔案的操作是由作業系統提供的檔案管理功能來實現的。用戶可以通過作業系統的系統呼叫（system calls）來對檔案進行各種操作，常見的檔案操作包括：

- **創建（Create）**：建立一個新的檔案。當用戶要求創建檔案時，作業系統會為其分配磁碟空間並為檔案設置基本屬性。
- **開啟（Open）**：將檔案載入到內存中，並建立與檔案的連接。這使得用戶或程式能夠對檔案進行讀寫操作。
- **讀取（Read）**：從檔案中讀取資料。當檔案被打開後，用戶可以將檔案中的內容載入到程式中，供進一步處理。
- **寫入（Write）**：將資料寫入檔案中。用戶可以將程式生成的資料或用戶輸入的資料寫入到檔案中。
- **關閉（Close）**：當檔案操作結束時，必須關閉檔案，這樣可以釋放系統資源並保存所有更改。
- **刪除（Delete）**：刪除檔案及其所佔用的磁碟空間。
- **重命名（Rename）**：改變檔案的名稱，但不改變其內容或位置。
- **檢查（Stat）**：檢查檔案的屬性，這通常用於獲取檔案的元資料（如大小、創建時間等）。

#### 4.1.5 檔案的結構

檔案的內部結構通常取決於檔案的類型和用途。檔案的結構可以是簡單的，也可以是複雜的。例如，文本檔案的內容可以是按行排列的純文字，而二進位檔案則可能包含多層次的結構，如標頭、資料區、校驗和等部分。

對於大多數檔案系統，檔案會被分割成若干個固定大小的區塊（block）來存儲。這樣可以提高存儲空間的利用率，並降低碎片化的問題。當檔案增長時，作業系統會將其擴展到新的區塊中。

#### 小結

檔案是操作系統中儲存和管理資料的基本單位，它不僅包含具體資料，還具有一些描述資料特徵的屬性。了解檔案的基本概念、屬性、類型以及操作方式，對於理解檔案系統的運作至關重要。檔案系統的設計與實現，直接影響到系統的效能、資料安全性和使用者的操作體驗。