### 第4章 數位電路設計

#### 4.2 順序邏輯電路設計

順序邏輯電路是一種依賴於當前輸入以及過去狀態的電路。這與組合邏輯電路的不同之處在於，順序邏輯電路的輸出不僅由當前的輸入信號決定，還會受到先前狀態的影響。因此，順序邏輯電路需要有記憶元件（如觸發器或寄存器）來存儲這些過去的狀態。這使得順序邏輯電路具有時間延遲、狀態遷移和循環等特性。

順序邏輯電路的設計過程通常包括確定狀態圖、建立狀態表、推導邏輯方程、選擇觸發器並構建實際電路等步驟。在這一章節中，我們將介紹如何設計順序邏輯電路，並通過具體範例演示設計過程。

#### 4.2.1 順序邏輯電路的基本構成

順序邏輯電路的基本組成包括：
1. **狀態記憶單元（狀態寄存器）**：通常由觸發器（如D觸發器、JK觸發器、T觸發器等）實現，這些元件負責記錄和保持電路的當前狀態。每個觸發器通常保存一個比特的信息。
2. **邏輯閘**：邏輯閘（如AND、OR、NOT等）用於處理來自輸入和狀態記憶單元的信號，並生成下一狀態的控制信號和輸出信號。
3. **時脈信號**：順序邏輯電路通常是同步的，即電路的行為是由一個時脈信號來控制的。時脈信號在每個時鐘週期內觸發一次狀態變化，將電路從一個狀態遷移到另一個狀態。

#### 4.2.2 設計順序邏輯電路的基本步驟

設計順序邏輯電路的過程比組合邏輯電路更加複雜，因為它需要處理狀態的轉換和記憶。以下是設計順序邏輯電路的一般步驟：

1. **確定電路的需求和功能**：
   設計順序邏輯電路的第一步是明確電路的功能和需求。例如，我們可能需要設計一個計數器，它應該根據時脈信號的變化進行計數。

2. **定義狀態和輸出**：
   順序邏輯電路的輸出不僅與輸入有關，還與當前的狀態有關。設計者需要根據需求確定所有可能的狀態，以及每個狀態下應該產生的輸出。狀態通常使用二進位編碼來表示。

3. **建立狀態表**：
   狀態表列出所有可能的狀態及其轉換。它會顯示每個狀態在接收到不同輸入時將如何遷移到下一個狀態。這個表格是設計順序邏輯電路的核心部分。

   例如，對於一個2位的計數器，狀態表可能如下所示：

   | 當前狀態 | 輸入 | 下一狀態 | 輸出 |
   |----------|------|----------|------|
   | 00       | 0    | 00       | 0    |
   | 00       | 1    | 01       | 1    |
   | 01       | 0    | 01       | 1    |
   | 01       | 1    | 10       | 0    |
   | 10       | 0    | 10       | 0    |
   | 10       | 1    | 11       | 1    |
   | 11       | 0    | 11       | 1    |
   | 11       | 1    | 00       | 0    |

   在這個例子中，狀態表示計數器的值，而輸入控制計數器的行為。

4. **推導邏輯方程**：
   從狀態表中，我們可以推導出如何用邏輯閘實現狀態轉換。這涉及到如何將當前狀態和輸入轉換為下一狀態和輸出。通常，我們會為每個狀態位（如D、Q）推導出對應的邏輯方程。

   在推導邏輯方程時，可以使用布林代數或卡諾圖來簡化邏輯表達式。

5. **選擇適當的記憶元件（觸發器）**：
   根據設計需求，選擇合適的記憶元件來實現狀態記憶。常用的觸發器有：
   - **D觸發器**：簡單且常用，能夠在時脈信號的上升沿或下降沿觸發時改變狀態。
   - **JK觸發器**：較為複雜，能夠實現更多的功能，尤其是在需要反向操作或“翻轉”狀態時。
   - **T觸發器**：用於計數器設計，當T端為1時，狀態會在每個時脈週期內翻轉。

6. **實現電路並測試**：
   根據邏輯方程選擇適當的邏輯閘和觸發器，將其組合成完整的順序邏輯電路。在實現後，對電路進行測試，確保它能夠正確地按照設計規格運行。

#### 4.2.3 設計範例：2位計數器

假設我們需要設計一個簡單的2位計數器。該計數器在每個時脈週期內加1，並且會在達到最大值後回到零。

1. **確定需求和功能**：
   - 輸入：時脈信號。
   - 輸出：2位二進制數字（Q1, Q0），表示當前計數值。

2. **定義狀態和輸出**：
   - 可能的狀態：00, 01, 10, 11（表示計數器的數值）。
   - 輸出：與狀態直接對應。

3. **建立狀態表**：

   | 當前狀態 | 時脈 | 下一狀態 | 輸出 |
   |----------|------|----------|------|
   | 00       | 1    | 01       | 00   |
   | 01       | 1    | 10       | 01   |
   | 10       | 1    | 11       | 10   |
   | 11       | 1    | 00       | 11   |

4. **推導邏輯方程**：
   根據狀態表，推導出每個狀態位的邏輯方程。

   假設使用D觸發器來存儲每個狀態位，則可以推導出：
   - D1 = Q0
   - D0 = ~Q0

5. **選擇觸發器**：
   我們選擇使用D觸發器來存儲每個狀態位。

6. **實現電路並測試**：
   根據邏輯方程構建電路，並使用模擬或實體硬體測試其功能。

#### 4.2.4 小結

順序邏輯電路設計涉及到不僅考慮當前的輸入，還要處理過去狀態的影響。設計順序邏輯電路需要進行狀態分析、推導邏輯方程、選擇合適的記憶元件以及構建電路。這些電路在計數器、寄存器、時序控制器等領域中有廣泛的應用。設計過程中需要特別注意狀態轉換的正確性，並確保所有組件協同工作。